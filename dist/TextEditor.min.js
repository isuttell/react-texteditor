module.exports=function(t){function e(o){if(n[o])return n[o].exports;var r=n[o]={exports:{},id:o,loaded:!1};return t[o].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(2),l=o(a),p=n(3),u=o(p),c=n(1),d=o(c),h=n(4),f=o(h),m=function(t){function e(n){r(this,e);var o=i(this,t.call(this,n));return o.state={focus:!1},o.handleBodyClick=o.handleBodyClick.bind(o),o}return s(e,t),e.prototype.componentDidMount=function(){document.body.addEventListener("click",this.handleBodyClick)},e.prototype.componentWillUnmount=function(){document.body.removeEventListener("click",this.handleBodyClick)},e.prototype.handleBodyClick=function(t){if(this.state.focus===!0){for(var e=t.target,n=!1,o=u["default"].findDOMNode(this);e.parentNode;){if(n=e===o)return;e=e.parentNode}this.handleBlur(t)}},e.prototype.handleCommand=function(t,e){return e.preventDefault(),e.stopPropagation(),document.execCommand(t,null,""),!1},e.prototype.handleChange=function(t){this.props.onChange(t)},e.prototype.handleBlur=function(t){this.setState({focus:!1}),this.props.onBlur(t)},e.prototype.handleClick=function(){this.setState({focus:!0}),this.props.onFocus()},e.prototype.handleKeyDown=function(t){switch(t.keyCode){case 13:this.props.onEnterKeyDown(t)}this.props.onKeyDown(t)},e.prototype.renderContent=function(){return this.props.editable?l["default"].createElement(f["default"],{className:"text-editor--field",pasteAsPlain:this.props.pasteAsPlain,onChange:this.handleChange.bind(this),onBlur:this.handleBlur.bind(this),onKeyDown:this.handleKeyDown.bind(this),tabIndex:this.props.tabIndex,html:this.props.html}):l["default"].createElement("div",{className:"text-editor--field",dangerouslySetInnerHTML:{__html:this.props.html?this.props.html:""}})},e.prototype.renderButton=function(t){var e=this.props.buttons[t];return e&&e.enabled&&e.comp?l["default"].cloneElement(e.comp,{key:e.command,className:(0,d["default"])("btn","btn-icon",e.comp.props.className),onClick:this.handleCommand.bind(this,e.command)}):e&&e.enabled?l["default"].createElement("button",{key:e.command,onClick:this.handleCommand.bind(this,e.command),className:(0,d["default"])("btn","btn-icon",e.iconClass),type:"button"}):null},e.prototype.renderButtons=function(){if(!this.props.editable||!this.props.buttons)return null;var t=[];for(var e in this.props.buttons)this.props.buttons.hasOwnProperty(e)&&t.push(this.renderButton(e));return l["default"].createElement("div",{className:"text-editor--controls btn-group"},t)},e.prototype.renderPlaceholder=function(){return window.navigator.userAgent.match(/MSIE/i)?null:this.props.editable&&this.props.placeholder?"string"!=typeof this.props.html||this.props.html.length>0?null:l["default"].createElement("span",{className:"text-editor--placeholder"},this.props.placeholder):null},e.prototype.render=function(){var t=(0,d["default"])(this.props.className,"text-editor",{"text-editor--editable":this.props.editable,focus:this.state.focus});return l["default"].createElement("div",{className:t,onClick:this.handleClick.bind(this),onMouseEnter:this.props.onMouseEnter,onMouseLeave:this.props.onMouseLeave},this.renderButtons(),this.renderPlaceholder(),this.renderContent())},e}(l["default"].Component);e["default"]=m,m.defaultProps={className:"",editable:!1,html:"",tabIndex:void 0,pasteAsPlain:!0,onChange:function(){},onBlur:function(){},onFocus:function(){},onEnterKeyDown:function(){},onKeyDown:function(){},onMouseEnter:function(){},onMouseLeave:function(){},buttons:{bold:{enabled:!0,command:"bold",iconClass:"icon-format_bold"},italic:{enabled:!0,command:"italic",iconClass:"icon-format_italic"},underline:{enabled:!0,command:"underline",iconClass:"icon-format_underlined"}}}},function(t,e){t.exports=require("classnames")},function(t,e){t.exports=require("react")},function(t,e){t.exports=require("react-dom")},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(2),l=o(a),p=n(3),u=o(p),c=n(1),d=o(c),h=function(t){function e(){return r(this,e),i(this,t.apply(this,arguments))}return s(e,t),e.prototype.shouldComponentUpdate=function(t){return t.html!==u["default"].findDOMNode(this).innerHTML},e.prototype.componentDidUpdate=function(){var t=u["default"].findDOMNode(this);this.props.html!==t.innerHTML&&(t.innerHTML=this.props.html)},e.prototype.emitChange=function(t,e){var n=u["default"].findDOMNode(this).innerHTML;e.target={value:n},n!==this.lastHtml&&this.props.onChange(e),"blur"===t&&this.props.onBlur(e),this.lastHtml=n},e.prototype.stripTags=function(t){return t?t.replace(/<\w+(\s+("[^"]*"|'[^']*'|[^>])+)?>|<\/\w+>/gi,""):""},e.prototype.escapeHTML=function(t){return t?t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):""},e.prototype.handlePaste=function(t){if(this.props.pasteAsPlain===!0){t.preventDefault();var e=t.clipboardData.getData("text/plain");e=this.escapeHTML(e),document.execCommand("insertHTML",!1,e)}},e.prototype.handleKeyDown=function(t){this.props.onKeyDown(t)},e.prototype.render=function(){return l["default"].createElement("div",{className:(0,d["default"])(this.props.className),contentEditable:!0,tabIndex:this.props.tabIndex,onPaste:this.handlePaste.bind(this),onInput:this.emitChange.bind(this,"input"),onKeyUp:this.emitChange.bind(this,"keyUp"),onBlur:this.emitChange.bind(this,"blur"),onKeyDown:this.handleKeyDown.bind(this),dangerouslySetInnerHTML:{__html:this.props.html}})},e}(l["default"].Component);e["default"]=h,h.defaultProps={tabIndex:void 0,pasteAsPlain:!0,onKeyDown:function(){},onChange:function(){},onBlur:function(){}}}]);